{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<section class="py-20 bg-background">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between mb-12">
      <div>
        <h2 class="font-serif text-4xl md:text-5xl font-bold mb-2" style="font-family: var(--font-playfair);">
          FEATURED BUNDLES
        </h2>
        <p class="text-lg text-muted-foreground">Curated collections for every space</p>
      </div>
      <div class="hidden md:flex gap-2">
        <button
          class="swiper-button-prev-custom inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border shadow-xs dark:bg-input/30 dark:border-input dark:hover:bg-input/50 size-9 border-primary text-primary hover:bg-primary hover:text-primary-foreground bg-transparent"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-chevron-left h-5 w-5"
          >
            <path d="m15 18-6-6 6-6"></path>
          </svg>
        </button>
        <button
          class="swiper-button-next-custom inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border shadow-xs dark:bg-input/30 dark:border-input dark:hover:bg-input/50 size-9 border-primary text-primary hover:bg-primary hover:text-primary-foreground bg-transparent"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-chevron-right h-5 w-5"
          >
            <path d="m9 18 6-6-6-6"></path>
          </svg>
        </button>
      </div>
    </div>
    <div class="swiper bundles-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div
            data-slot="card"
            class="text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm group overflow-hidden bg-card border-border hover:border-primary transition-all duration-300 h-full"
          >
            <div class="relative h-[300px] overflow-hidden">
              <img
                alt="STARTER BUNDLE"
                loading="lazy"
                decoding="async"
                data-nimg="fill"
                class="object-cover group-hover:scale-105 transition-transform duration-500"
                src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/black-luxury-aroma-diffuser-with-blue-light-in-mod-DNxhhMKroDIRE7Sumf86V31KATcloV.jpg"
                style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;"
              >
              <div class="absolute top-4 right-4 bg-primary text-primary-foreground px-3 py-1 text-xs font-bold rounded-full">
                BEST VALUE
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-foreground">STARTER BUNDLE</h3>
              <p class="text-sm text-muted-foreground mb-4 line-clamp-2">
                Complete home scenting solution with diffuser + 3 premium oils
              </p>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-2xl font-bold text-primary">$149.99</span
                ><span class="text-sm text-muted-foreground line-through">$199.99</span>
              </div>
              <button
                data-slot="button"
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs h-9 px-4 py-2 has-[&gt;svg]:px-3 w-full bg-primary hover:bg-primary/90 text-primary-foreground"
              >
                ADD TO CART
              </button>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div
            data-slot="card"
            class="text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm group overflow-hidden bg-card border-border hover:border-primary transition-all duration-300 h-full"
          >
            <div class="relative h-[300px] overflow-hidden">
              <img
                alt="CAR ESSENTIAL KIT"
                loading="lazy"
                decoding="async"
                data-nimg="fill"
                class="object-cover group-hover:scale-105 transition-transform duration-500"
                src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/black-portable-aroma-diffuser-in-car-cup-holder-rG1QWomARpFVzfJnysGHNrRF41pGQT.jpg"
                style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;"
              >
              <div class="absolute top-4 right-4 bg-primary text-primary-foreground px-3 py-1 text-xs font-bold rounded-full">
                POPULAR
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-foreground">CAR ESSENTIAL KIT</h3>
              <p class="text-sm text-muted-foreground mb-4 line-clamp-2">
                Portable diffuser with 2 signature scents for on-the-go
              </p>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-2xl font-bold text-primary">$79.99</span
                ><span class="text-sm text-muted-foreground line-through">$99.99</span>
              </div>
              <button
                data-slot="button"
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs h-9 px-4 py-2 has-[&gt;svg]:px-3 w-full bg-primary hover:bg-primary/90 text-primary-foreground"
              >
                ADD TO CART
              </button>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div
            data-slot="card"
            class="text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm group overflow-hidden bg-card border-border hover:border-primary transition-all duration-300 h-full"
          >
            <div class="relative h-[300px] overflow-hidden">
              <img
                alt="PREMIUM SCENT SET"
                loading="lazy"
                decoding="async"
                data-nimg="fill"
                class="object-cover group-hover:scale-105 transition-transform duration-500"
                src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/luxury-aroma-oil-bottle-with-citrus-fruits-nSJSfaprbnWDRTJVBcm1YAk9qnRghc.jpg"
                style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;"
              >
              <div class="absolute top-4 right-4 bg-primary text-primary-foreground px-3 py-1 text-xs font-bold rounded-full">
                NEW
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-foreground">PREMIUM SCENT SET</h3>
              <p class="text-sm text-muted-foreground mb-4 line-clamp-2">
                Collection of 5 luxury oils for every mood and season
              </p>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-2xl font-bold text-primary">$89.99</span
                ><span class="text-sm text-muted-foreground line-through">$119.99</span>
              </div>
              <button
                data-slot="button"
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs h-9 px-4 py-2 has-[&gt;svg]:px-3 w-full bg-primary hover:bg-primary/90 text-primary-foreground"
              >
                ADD TO CART
              </button>
            </div>
          </div>
        </div>
        <div class="flex-[0_0_100%] min-w-0 sm:flex-[0_0_50%] lg:flex-[0_0_33.333%]">
          <div
            data-slot="card"
            class="text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm group overflow-hidden bg-card border-border hover:border-primary transition-all duration-300 h-full"
          >
            <div class="relative h-[300px] overflow-hidden">
              <img
                alt="OFFICE PRO BUNDLE"
                loading="lazy"
                decoding="async"
                data-nimg="fill"
                class="object-cover group-hover:scale-105 transition-transform duration-500"
                src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/black-luxury-aroma-diffuser-with-blue-light-in-mod-DNxhhMKroDIRE7Sumf86V31KATcloV.jpg"
                style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;"
              >
              <div class="absolute top-4 right-4 bg-primary text-primary-foreground px-3 py-1 text-xs font-bold rounded-full">
                TRENDING
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-foreground">OFFICE PRO BUNDLE</h3>
              <p class="text-sm text-muted-foreground mb-4 line-clamp-2">
                Smart diffuser with app control + 4 focus-enhancing scents
              </p>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-2xl font-bold text-primary">$169.99</span
                ><span class="text-sm text-muted-foreground line-through">$229.99</span>
              </div>
              <button
                data-slot="button"
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs h-9 px-4 py-2 has-[&gt;svg]:px-3 w-full bg-primary hover:bg-primary/90 text-primary-foreground"
              >
                ADD TO CART
              </button>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div
            data-slot="card"
            class="text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm group overflow-hidden bg-card border-border hover:border-primary transition-all duration-300 h-full"
          >
            <div class="relative h-[300px] overflow-hidden">
              <img
                alt="LUXURY COLLECTION"
                loading="lazy"
                decoding="async"
                data-nimg="fill"
                class="object-cover group-hover:scale-105 transition-transform duration-500"
                src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/elegant-white-aroma-diffuser-with-gold-accents-on-m-vQxKrM8jT2L9P4N6S1H3F5G7J8K0.jpg"
                style="position: absolute; height: 100%; width: 100%; inset: 0px; color: transparent;"
              >
              <div class="absolute top-4 right-4 bg-primary text-primary-foreground px-3 py-1 text-xs font-bold rounded-full">
                LUXURY
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2 text-foreground">LUXURY COLLECTION</h3>
              <p class="text-sm text-muted-foreground mb-4 line-clamp-2">
                Premium marble diffuser with 5 exclusive signature scents
              </p>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-2xl font-bold text-primary">$299.99</span
                ><span class="text-sm text-muted-foreground line-through">$399.99</span>
              </div>
              <button
                data-slot="button"
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*='size-'])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-xs h-9 px-4 py-2 has-[&gt;svg]:px-3 w-full bg-primary hover:bg-primary/90 text-primary-foreground"
              >
                ADD TO CART
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Swiper Pagination -->
      <div class="swiper-pagination-custom flex justify-center gap-2 mt-8 md:hidden"></div>
    </div>
  </div>
</section>

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const swiper = new Swiper('.bundles-swiper', {
    // Basic settings
    slidesPerView: 1,
    spaceBetween: 24,
    loop: false,
    
    // Responsive breakpoints
    breakpoints: {
      640: {
        slidesPerView: 2,
        spaceBetween: 24,
      },
      1024: {
        slidesPerView: 3,
        spaceBetween: 24,
      },
    },
    
    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next-custom',
      prevEl: '.swiper-button-prev-custom',
    },
    
    // Pagination dots
    pagination: {
      el: '.swiper-pagination-custom',
      clickable: true,
      renderBullet: function (index, className) {
        return '<span class="' + className + ' w-2 h-2 rounded-full bg-muted cursor-pointer transition-colors duration-200"></span>';
      },
    },
    
    // Touch settings
    touchRatio: 1,
    touchAngle: 45,
    grabCursor: true,
    
    // Smooth transitions
    speed: 300,
    effect: 'slide',
  });
  
  // Custom pagination styling
  const paginationBullets = document.querySelectorAll('.swiper-pagination-custom .swiper-pagination-bullet');
  paginationBullets.forEach(bullet => {
    bullet.addEventListener('click', function() {
      paginationBullets.forEach(b => b.classList.remove('bg-primary'));
      paginationBullets.forEach(b => b.classList.add('bg-muted'));
      this.classList.remove('bg-muted');
      this.classList.add('bg-primary');
    });
  });
  
  // Update active bullet on slide change
  swiper.on('slideChange', function () {
    paginationBullets.forEach(b => b.classList.remove('bg-primary'));
    paginationBullets.forEach(b => b.classList.add('bg-muted'));
    const activeBullet = document.querySelector('.swiper-pagination-custom .swiper-pagination-bullet-active');
    if (activeBullet) {
      activeBullet.classList.remove('bg-muted');
      activeBullet.classList.add('bg-primary');
    }
  });
});
</script>

{% schema %}
{
  "name": "Whif Flash Sale Section",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "default": "Flash Sale",
      "label": "Heading"
    },
    {
      "type": "text",
      "id": "countdown_end_date",
      "label": "Countdown end date",
      "info": "Format: YYYY-MM-DD HH:MM:SS"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4,
      "label": "Number of products to show"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "cta_button",
      "name": "Button",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "default": "Shop All Sale Items",
          "label": "Button label"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary",
          "default": false,
          "label": "Use outline button style"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Whif Flash Sale Section",
      "blocks": [
        {
          "type": "cta_button"
        }
      ]
    }
  ]
}
{% endschema %}
